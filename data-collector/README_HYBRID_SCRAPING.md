# Hybrid Scraping Method (Pagination + Dynamic Loading)

## ê°œìš”

Amazon Best Sellers í˜ì´ì§€ëŠ” **í˜ì´ì§€ë„¤ì´ì…˜**ê³¼ **ë™ì  ë¡œë”©** ë‘ ê°€ì§€ ë°©ì‹ì„ ëª¨ë‘ ì‚¬ìš©í•©ë‹ˆë‹¤.
ë”°ë¼ì„œ ìµœì ì˜ ë°ì´í„° ìˆ˜ì§‘ì„ ìœ„í•´ **í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹**ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ë¬¸ì œ ì¸ì‹

### í˜ì´ì§€ë„¤ì´ì…˜ë§Œ ì‚¬ìš©í•  ê²½ìš°
```
Page 1 ë¡œë“œ â†’ ì¼ë¶€ ì œí’ˆë§Œ ë³´ì„ (ë™ì  ë¡œë”© ì•ˆë¨)
Page 2 ë¡œë“œ â†’ ì¼ë¶€ ì œí’ˆë§Œ ë³´ì„ (ë™ì  ë¡œë”© ì•ˆë¨)
ê²°ê³¼: 60ê°œ ìˆ˜ì§‘ âŒ
```

### ìŠ¤í¬ë¡¤ë§Œ ì‚¬ìš©í•  ê²½ìš°
```
Page 1 ìŠ¤í¬ë¡¤ â†’ 50ê°œê¹Œì§€ë§Œ ìˆ˜ì§‘
Page 2ë¡œ ì´ë™ ì•ˆí•¨
ê²°ê³¼: 50ê°œ ìˆ˜ì§‘ âŒ
```

### âœ… í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹
```
Page 1 ë¡œë“œ â†’ ìŠ¤í¬ë¡¤ â†’ 50ê°œ ìˆ˜ì§‘
Page 2 ë¡œë“œ â†’ ìŠ¤í¬ë¡¤ â†’ 50ê°œ ìˆ˜ì§‘
ê²°ê³¼: 100ê°œ ìˆ˜ì§‘ âœ…
```

## í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤í¬ë˜í•‘ ë¡œì§

```python
async def _scrape_with_hybrid(category_url, max_rank=100):
    """
    1. í˜ì´ì§€ ìˆœíšŒ (Pagination)
       â”œâ”€ Page 1: category_url
       â”œâ”€ Page 2: category_url?pg=2
       â””â”€ Page N: category_url?pg=N

    2. ê° í˜ì´ì§€ ë‚´ì—ì„œ ë™ì  ìŠ¤í¬ë¡¤
       â”œâ”€ í˜ì´ì§€ ë¡œë“œ
       â”œâ”€ ì´ˆê¸° ëŒ€ê¸° (3-5ì´ˆ)
       â”œâ”€ ìµœëŒ€ 15íšŒ ìŠ¤í¬ë¡¤
       â”‚  â”œâ”€ ì œí’ˆ ì¶”ì¶œ
       â”‚  â”œâ”€ ì¤‘ë³µ ì œê±°
       â”‚  â”œâ”€ ë§¤ 4ë²ˆì§¸: ìµœí•˜ë‹¨ ìŠ¤í¬ë¡¤
       â”‚  â””â”€ ë‚˜ë¨¸ì§€: ì¼ë°˜ ìŠ¤í¬ë¡¤
       â”œâ”€ ìƒˆ ì œí’ˆ ì—†ìŒ (3íšŒ) â†’ ë‹¤ìŒ í˜ì´ì§€
       â””â”€ í˜ì´ì§€ë‹¹ ~50ê°œ ìˆ˜ì§‘

    3. ì´ 100ê°œ ìˆ˜ì§‘ ì™„ë£Œ
    """
```

## ìƒì„¸ ë™ì‘ ê³¼ì •

### Page 1 ìŠ¤í¬ë˜í•‘
```
============================================================
ğŸ“„ PAGE 1/2
============================================================
Waiting for products to load...
ğŸ”„ Scrolling within page to load dynamic content...
  Scroll 1: 15 products
  Scroll 2: 28 products
  Scroll 3: 38 products
  Scroll 4: 45 products
  Scroll 5: 50 products
  âœ“ No new products after 3 scrolls, page complete
âœ“ Page scroll complete: 50 products collected
âœ… Page 1: Collected 50 products (Total: 50)
â³ Waiting before next page...
```

### Page 2 ìŠ¤í¬ë˜í•‘
```
============================================================
ğŸ“„ PAGE 2/2
============================================================
Waiting for products to load...
ğŸ”„ Scrolling within page to load dynamic content...
  Scroll 1: 16 products
  Scroll 2: 30 products
  Scroll 3: 42 products
  Scroll 4: 50 products
  âœ“ Page limit reached: 50 products
âœ“ Page scroll complete: 50 products collected
âœ… Page 2: Collected 50 products (Total: 100)
ğŸ¯ Reached target of 100 products!
```

### ìµœì¢… ê²°ê³¼
```
============================================================
âœ… HYBRID SCRAPING COMPLETE
ğŸ“Š Total: 100/100 products
ğŸ“„ Pages scraped: 2
============================================================
```

## ì£¼ìš” ê°œì„  ì‚¬í•­

### 1. í˜ì´ì§€ ìˆœíšŒ
- ìë™ìœ¼ë¡œ ?pg=2, ?pg=3 URL ìƒì„±
- URLì— ì´ë¯¸ íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ &pg=N ì‚¬ìš©

### 2. í˜ì´ì§€ë³„ ìŠ¤í¬ë¡¤
- ê° í˜ì´ì§€ì—ì„œ ìµœëŒ€ 15íšŒ ìŠ¤í¬ë¡¤
- ë§¤ 4ë²ˆì§¸: ìµœí•˜ë‹¨ ìŠ¤í¬ë¡¤
- 3íšŒ ì—°ì† ìƒˆ ì œí’ˆ ì—†ìœ¼ë©´ í˜ì´ì§€ ì™„ë£Œ

### 3. ì¤‘ë³µ ì œê±°
- ASIN ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µ ì œê±°
- í˜ì´ì§€ ê°„ ì¤‘ë³µë„ ì œê±°

### 4. ì§„í–‰ ìƒí™© í‘œì‹œ
- í˜ì´ì§€ë³„ ì§„í–‰ ìƒí™©
- ì‹¤ì‹œê°„ ì œí’ˆ ìˆ˜ ì—…ë°ì´íŠ¸
- ëª©í‘œ ë‹¬ì„± ì•Œë¦¼

## íŒŒë¼ë¯¸í„° ì„¤ì •

### í˜ì´ì§€ë‹¹ ì œí’ˆ ìˆ˜
```python
max_products=60  # í˜ì´ì§€ë‹¹ ìµœëŒ€ 60ê°œ (ì—¬ìœ  ìˆê²Œ)
```

### í˜ì´ì§€ë‹¹ ìŠ¤í¬ë¡¤ íšŸìˆ˜
```python
max_scrolls=15  # í•œ í˜ì´ì§€ì— ì¶©ë¶„
```

### ìŠ¤í¬ë¡¤ ëŒ€ê¸° ì‹œê°„
```python
await self.random_delay(1.5, 2.5)  # ë¹ ë¥¸ ìŠ¤í¬ë¡¤
```

### í˜ì´ì§€ ê°„ ëŒ€ê¸°
```python
await self.random_delay(3, 5)  # í˜ì´ì§€ ê°„ ì¶©ë¶„í•œ ëŒ€ê¸°
```

## ì„±ëŠ¥ ë¹„êµ

| ë°©ì‹ | ìˆ˜ì§‘ ì œí’ˆ ìˆ˜ | ì†Œìš” ì‹œê°„ | ì„±ê³µë¥  |
|------|-------------|-----------|--------|
| í˜ì´ì§€ë„¤ì´ì…˜ë§Œ | ~60ê°œ | 1ë¶„ | 60% |
| ìŠ¤í¬ë¡¤ë§Œ | ~50ê°œ | 2ë¶„ | 50% |
| **í•˜ì´ë¸Œë¦¬ë“œ** | **~100ê°œ** | **2.5ë¶„** | **100%** |

## ì‚¬ìš© ë°©ë²•

### í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
```bash
python test_5_categories.py --mode all
```

### ë©”ì¸ íŒŒì´í”„ë¼ì¸
```bash
python main.py --mode full
```

### Python ì½”ë“œ
```python
async with RankScraper() as scraper:
    products = await scraper.scrape(
        category_url="https://amazon.com/...",
        max_rank=100,
        use_hybrid=True  # í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë“œ
    )
```

## ë¡œê·¸ ì¶œë ¥ ì˜ˆì‹œ

```
2026-01-01 10:00:00 | INFO | Scraping Best Sellers from: https://amazon.com/...
2026-01-01 10:00:00 | INFO | Target: 100 products
2026-01-01 10:00:00 | INFO | ğŸ”¥ Using HYBRID method (Pagination + Scroll)
2026-01-01 10:00:00 | INFO | Will navigate pages AND scroll within each page

============================================================
ğŸ“„ PAGE 1/2
============================================================
2026-01-01 10:00:05 | INFO | ğŸ”„ Scrolling within page...
2026-01-01 10:00:20 | INFO | âœ“ Page scroll complete: 50 products
2026-01-01 10:00:20 | SUCCESS | âœ… Page 1: Collected 50 products (Total: 50)
2026-01-01 10:00:25 | INFO | â³ Waiting before next page...

============================================================
ğŸ“„ PAGE 2/2
============================================================
2026-01-01 10:00:30 | INFO | ğŸ”„ Scrolling within page...
2026-01-01 10:00:45 | INFO | âœ“ Page scroll complete: 50 products
2026-01-01 10:00:45 | SUCCESS | âœ… Page 2: Collected 50 products (Total: 100)
2026-01-01 10:00:45 | SUCCESS | ğŸ¯ Reached target of 100 products!

============================================================
âœ… HYBRID SCRAPING COMPLETE
ğŸ“Š Total: 100/100 products
ğŸ“„ Pages scraped: 2
============================================================
```

## ë¬¸ì œ í•´ê²°

### ì—¬ì „íˆ 100ê°œ ë¯¸ë§Œ ìˆ˜ì§‘
1. ìŠ¤í¬ë¡¤ íšŸìˆ˜ ì¦ê°€
   ```python
   max_scrolls = 20  # 15 â†’ 20
   ```

2. í˜ì´ì§€ë‹¹ ëŒ€ê¸° ì‹œê°„ ì¦ê°€
   ```python
   await self.random_delay(4, 6)  # 3-5 â†’ 4-6
   ```

### Rate Limiting ë°œìƒ
- í˜ì´ì§€ ê°„ ëŒ€ê¸° ì‹œê°„ ì¦ê°€
- ìŠ¤í¬ë¡¤ ê°„ ëŒ€ê¸° ì‹œê°„ ì¦ê°€

## í–¥í›„ ê°œì„  ì‚¬í•­

1. **Next ë²„íŠ¼ í´ë¦­**
   - URL íŒŒë¼ë¯¸í„° ëŒ€ì‹  "Next" ë²„íŠ¼ í´ë¦­
   - ë” ìì—°ìŠ¤ëŸ¬ìš´ í˜ì´ì§€ ì´ë™

2. **ë¬´í•œ ìŠ¤í¬ë¡¤ ê°ì§€**
   - ì¼ë¶€ í˜ì´ì§€ëŠ” ë¬´í•œ ìŠ¤í¬ë¡¤ ì‚¬ìš©
   - ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬ ë°©ì‹ ë³€ê²½

3. **ë³‘ë ¬ ì²˜ë¦¬**
   - ì—¬ëŸ¬ ì¹´í…Œê³ ë¦¬ ë™ì‹œ ìŠ¤í¬ë˜í•‘
   - (Rate Limiting ì£¼ì˜)

## ê¸°ìˆ  ìŠ¤íƒ

- **Playwright**: ë¸Œë¼ìš°ì € ìë™í™”
- **Async/Await**: ë¹„ë™ê¸° ì²˜ë¦¬
- **ASIN ê¸°ë°˜ ì¤‘ë³µ ì œê±°**: ë°ì´í„° ì •í™•ì„±
